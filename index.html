<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MIMO Companion</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #050505;
            font-family: 'JetBrains Mono', monospace;
            overflow: hidden;
            touch-action: none;
            color: #ffffff;
        }
        .scanline {
            width: 100%;
            height: 2px;
            background: rgba(34, 211, 238, 0.05);
            position: absolute;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 10;
            animation: scan 6s linear infinite;
        }
        @keyframes scan {
            0% { transform: translateY(0); }
            100% { transform: translateY(100vh); }
        }
        .power-pulse {
            animation: pulse-cyan 3s infinite ease-in-out;
        }
        @keyframes pulse-cyan {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.6; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const RotateIcon = () => (
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" className="text-cyan-500 animate-[spin_4s_linear_infinite]">
                <path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"/>
                <path d="M21 3v5h-5"/>
            </svg>
        );

        const ZapIcon = () => (
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="text-cyan-400">
                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
            </svg>
        );

        const App = () => {
            const [isLandscape, setIsLandscape] = useState(false);
            const [isAsleep, setIsAsleep] = useState(true);
            const [mood, setMood] = useState('neutral');
            const [eyePos, setEyePos] = useState({ x: 0, y: 0 });
            const [isBlinking, setIsBlinking] = useState(false);

            useEffect(() => {
                const checkOrientation = () => {
                    const landscape = window.innerWidth > window.innerHeight;
                    setIsLandscape(landscape);
                    // Reset to sleep if we rotate back to portrait then to landscape again
                    if (!landscape) setIsAsleep(true);
                };
                window.addEventListener('resize', checkOrientation);
                checkOrientation();
                return () => window.removeEventListener('resize', checkOrientation);
            }, []);

            useEffect(() => {
                if (!isLandscape || isAsleep) return;

                const moveInterval = setInterval(() => {
                    if (mood === 'neutral') {
                        setEyePos({
                            x: (Math.random() - 0.5) * 45,
                            y: (Math.random() - 0.5) * 25
                        });
                    }
                }, 4000);

                const blinkInterval = setInterval(() => {
                    setIsBlinking(true);
                    setTimeout(() => setIsBlinking(false), 120);
                }, 5000 + Math.random() * 4000);

                return () => {
                    clearInterval(moveInterval);
                    clearInterval(blinkInterval);
                };
            }, [isLandscape, isAsleep, mood]);

            const handleWakeUp = () => {
                if (isAsleep) {
                    setIsAsleep(false);
                } else {
                    // Interaction when already awake
                    setMood('happy');
                    setEyePos({ x: 0, y: -20 });
                    setTimeout(() => {
                        setMood('neutral');
                        setEyePos({ x: 0, y: 0 });
                    }, 2500);
                }
            };

            // PORTRAIT: Initialization Message
            if (!isLandscape) {
                return (
                    <div className="flex flex-col items-center justify-center min-h-screen p-6 text-center">
                        <div className="relative mb-12">
                            <div className="w-24 h-44 border-2 border-zinc-800 rounded-[2.5rem] flex items-center justify-center bg-zinc-950/50">
                                <RotateIcon />
                            </div>
                            <div className="absolute -inset-6 bg-cyan-500/5 blur-3xl rounded-full" />
                        </div>
                        <h1 className="text-2xl font-bold tracking-[0.2em] text-white uppercase mb-4">Initialize MIMO</h1>
                        <p className="text-zinc-500 max-w-xs text-xs tracking-widest leading-relaxed">
                            Rotate device to landscape orientation to establish interface link.
                        </p>
                    </div>
                );
            }

            // LANDSCAPE: Sleep or Active Interface
            return (
                <div className="relative w-full h-screen bg-black flex items-center justify-center overflow-hidden cursor-pointer" onClick={handleWakeUp}>
                    <div className="scanline"></div>
                    
                    {/* HUD: System Status */}
                    <div className="absolute top-8 left-8 flex flex-col gap-1">
                        <div className="text-[10px] text-cyan-500 font-bold tracking-[0.3em] uppercase">MIMO-System</div>
                        <div className="flex items-center gap-2">
                            <div className={`w-1.5 h-1.5 rounded-full ${isAsleep ? 'bg-zinc-800' : 'bg-cyan-500 animate-pulse'}`} />
                            <div className="text-[8px] text-zinc-500 font-mono uppercase tracking-tighter">
                                {isAsleep ? 'Link_Idle: Standby' : 'Link_Status: Active'}
                            </div>
                        </div>
                    </div>

                    {/* HUD: Power */}
                    <div className="absolute bottom-8 right-8 flex items-center gap-6">
                        <div className="flex flex-col items-end">
                            <div className="text-[8px] text-zinc-600 mb-1 uppercase tracking-widest font-bold">Power Core</div>
                            <div className="w-32 h-1 bg-zinc-900 rounded-full overflow-hidden border border-zinc-800">
                                <div className={`h-full bg-cyan-500 transition-all duration-1000 ${isAsleep ? 'w-[20%]' : 'w-[94%] shadow-[0_0_10px_rgba(6,182,212,0.5)]'}`} />
                            </div>
                        </div>
                        <ZapIcon />
                    </div>

                    {/* Face Assembly */}
                    <div 
                        className={`flex gap-24 md:gap-48 items-center justify-center transition-all duration-1000 ease-[cubic-bezier(0.23,1,0.32,1)] ${isAsleep ? 'opacity-30' : 'opacity-100'}`}
                        style={{ transform: `translate(${eyePos.x}px, ${eyePos.y}px)` }}
                    >
                        <Eye isBlinking={isBlinking} mood={mood} isAsleep={isAsleep} />
                        <Eye isBlinking={isBlinking} mood={mood} isAsleep={isAsleep} />
                    </div>

                    {/* Center Notification */}
                    <div className="absolute top-12 left-1/2 -translate-x-1/2 flex flex-col items-center">
                        {isAsleep ? (
                            <div className="px-6 py-1 border border-zinc-800 bg-zinc-900/20 rounded-full text-[8px] text-zinc-500 uppercase tracking-[0.4em] power-pulse">
                                Tap Interface to Wake
                            </div>
                        ) : mood === 'happy' && (
                            <div className="px-6 py-1 border border-cyan-500/20 bg-cyan-500/5 rounded-full text-[9px] text-cyan-400 font-bold uppercase tracking-[0.6em] animate-pulse">
                                Input Registered
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const Eye = ({ isBlinking, mood, isAsleep }) => {
            const getEyeContent = () => {
                if (isAsleep) {
                    // Closed eyelids (horizontal lines)
                    return <div className="w-full h-1.5 md:h-2 bg-zinc-800 rounded-full shadow-[0_0_5px_rgba(0,0,0,1)]" />;
                }
                
                if (isBlinking) return null;

                if (mood === 'happy') {
                    return (
                        <svg viewBox="0 0 100 100" className="w-full h-full fill-cyan-400 drop-shadow-[0_0_15px_rgba(34,211,238,0.8)]">
                            <path d="M10,65 C20,30 80,30 90,65 L90,80 C80,45 20,45 10,80 Z" />
                        </svg>
                    );
                }

                return <div className="w-full h-full bg-cyan-400 rounded-[20px] md:rounded-[28px] shadow-[0_0_25px_rgba(6,182,212,0.5)]" />;
            };

            return (
                <div className={`
                    w-40 h-40 md:w-56 md:h-56 bg-zinc-900/40 rounded-[40px] md:rounded-[50px] p-8 flex items-center justify-center border border-zinc-800/30
                    ${isBlinking ? 'scale-y-0 opacity-0' : 'scale-y-100 opacity-100'}
                    transition-all duration-[120ms] ease-in-out
                `}>
                    <div className="w-full h-full flex items-center justify-center">
                        {getEyeContent()}
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

